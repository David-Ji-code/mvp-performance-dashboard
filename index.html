<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MVP Performance Metrics</title>
  
  <!-- Load React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- Load Recharts -->
  <script src="https://unpkg.com/recharts@2.5.0/umd/Recharts.min.js"></script>
  
  <!-- Babel for JSX transformation -->
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    /* Custom styles beyond Tailwind */
    .gradient-primary {
      background: linear-gradient(135deg, #2563EB 0%, #4F46E5 100%);
    }

    .gradient-success {
      background: linear-gradient(135deg, #059669 0%, #10B981 100%);
    }

    /* Chart customizations */
    .recharts-default-tooltip {
      background-color: #FFFFFF !important;
      border: 1px solid #E2E8F0 !important;
      border-radius: 8px !important;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
      padding: 12px !important;
    }

    .recharts-tooltip-label {
      color: #475569 !important;
      font-weight: 500 !important;
      margin-bottom: 4px !important;
    }

    .recharts-tooltip-item {
      color: #1E293B !important;
      padding: 2px 0 !important;
    }

    /* Custom animations */
    .chart-container {
      transition: all 0.3s ease;
    }

    .chart-container:hover {
      transform: translateY(-2px);
    }

    /* Progress bar animations */
    .progress-bar {
      transition: width 1s ease-in-out;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #F1F5F9;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: #CBD5E1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #94A3B8;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .chart-container {
        min-height: 300px;
      }
    }

    /* Loading animation */
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div id="root">
    <!-- Fallback content while loading -->
    <div style="display: flex; justify-content: center; align-items: center; height: 100vh;">
      <div style="text-align: center;">
        <div style="border: 4px solid #e2e8f0; border-top-color: #2563eb; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto;"></div>
        <p style="margin-top: 16px; color: #64748b;">Loading dashboard...</p>
      </div>
    </div>
  </div>

  <script type="text/babel">
    // Wait for all libraries to load
    window.addEventListener('DOMContentLoaded', function() {
      // Check if Recharts is loaded
      if (typeof Recharts === 'undefined') {
        console.error('Recharts library not found');
        document.getElementById('root').innerHTML = '<div style="text-align: center; padding: 2rem;"><h2>Failed to load dashboard components</h2><p>Please refresh the page or check your internet connection.</p><button onclick="location.reload()" style="background-color: #2563EB; color: white; padding: 8px 16px; border-radius: 4px; border: none; margin-top: 16px; cursor: pointer;">Reload Page</button></div>';
        return;
      }

      const { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = Recharts;

      // Color configuration
      const colors = {
        primary: {
          main: '#2563EB',
          light: '#60A5FA',
          dark: '#1E40AF',
        },
        secondary: {
          main: '#475569',
          light: '#94A3B8',
          dark: '#334155',
        },
        success: {
          main: '#059669',
          light: '#34D399',
        },
        border: '#E2E8F0',
        text: {
          primary: '#1E293B',
          secondary: '#64748B'
        }
      };

      // Sample data
      const notificationTimeData = [
        { day: '2025-01-01', avg_time: 42, baseline: 45, target: 11 },
        { day: '2025-01-08', avg_time: 35, baseline: 45, target: 11 },
        { day: '2025-01-15', avg_time: 28, baseline: 45, target: 11 },
        { day: '2025-01-22', avg_time: 20, baseline: 45, target: 11 },
        { day: '2025-01-29', avg_time: 15, baseline: 45, target: 11 },
      ];

      const fcrData = [
        { week: 'Week 1', rate: 65, target: 80 },
        { week: 'Week 2', rate: 70, target: 80 },
        { week: 'Week 3', rate: 75, target: 80 },
        { week: 'Week 4', rate: 78, target: 80 },
      ];

      const callVolumeData = [
        { week: 'Week 1', total_calls: 1000, outage_calls: 300 },
        { week: 'Week 2', total_calls: 850, outage_calls: 200 },
        { week: 'Week 3', total_calls: 700, outage_calls: 150 },
        { week: 'Week 4', total_calls: 600, outage_calls: 100 },
      ];

      // Chart configurations
      const tooltipStyle = {
        backgroundColor: '#FFFFFF',
        border: `1px solid ${colors.border}`,
        borderRadius: '8px',
        boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
        padding: '12px',
      };

      const chartContainerStyle = "bg-white rounded-xl shadow-lg border border-slate-100 p-6 transition-all duration-300 hover:shadow-xl hover:border-slate-200 chart-container";

      // Dashboard Component
      const MetricsDashboard = () => {
        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8">
            <div className="max-w-7xl mx-auto">
              <h1 className="text-4xl font-bold text-slate-800 mb-2">MVP Performance Metrics</h1>
              <p className="text-slate-500 mb-8">Real-time monitoring dashboard</p>

              <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                {/* Notification Time Chart */}
                <div className={chartContainerStyle}>
                  <h2 className="text-xl font-semibold text-slate-700 mb-2">Notification Time Trends</h2>
                  <p className="text-sm text-slate-500 mb-6">Average notification delivery time</p>
                  <div className="h-72">
                    <ResponsiveContainer width="100%" height="100%">
                      <LineChart data={notificationTimeData}>
                        <CartesianGrid strokeDasharray="3 3" stroke={colors.border} vertical={false} />
                        <XAxis
                          dataKey="day"
                          stroke={colors.text.secondary}
                          tick={{ fill: colors.text.secondary }}
                          tickLine={false}
                        />
                        <YAxis
                          stroke={colors.text.secondary}
                          tick={{ fill: colors.text.secondary }}
                          tickLine={false}
                          axisLine={false}
                        />
                        <Tooltip contentStyle={tooltipStyle} />
                        <Legend iconType="circle" />
                        <Line
                          type="monotone"
                          dataKey="avg_time"
                          name="Current"
                          stroke={colors.primary.main}
                          strokeWidth={3}
                          dot={{ fill: colors.primary.main, strokeWidth: 2 }}
                          activeDot={{ r: 8, stroke: colors.primary.light }}
                        />
                        <Line
                          type="monotone"
                          dataKey="baseline"
                          name="Baseline"
                          stroke={colors.secondary.main}
                          strokeDasharray="5 5"
                          dot={false}
                        />
                        <Line
                          type="monotone"
                          dataKey="target"
                          name="Target"
                          stroke={colors.success.main}
                          strokeDasharray="5 5"
                          dot={false}
                        />
                      </LineChart>
                    </ResponsiveContainer>
                  </div>
                </div>

                {/* FCR Chart */}
                <div className={chartContainerStyle}>
                  <h2 className="text-xl font-semibold text-slate-700 mb-2">First Call Resolution Rate</h2>
                  <p className="text-sm text-slate-500 mb-6">Percentage of issues resolved in first contact</p>
                  <div className="h-72">
                    <ResponsiveContainer width="100%" height="100%">
                      <LineChart data={fcrData}>
                        <CartesianGrid strokeDasharray="3 3" stroke={colors.border} vertical={false} />
                        <XAxis
                          dataKey="week"
                          stroke={colors.text.secondary}
                          tick={{ fill: colors.text.secondary }}
                          tickLine={false}
                        />
                        <YAxis
                          domain={[0, 100]}
                          stroke={colors.text.secondary}
                          tick={{ fill: colors.text.secondary }}
                          tickLine={false}
                          axisLine={false}
                        />
                        <Tooltip contentStyle={tooltipStyle} />
                        <Legend iconType="circle" />
                        <Line
                          type="monotone"
                          dataKey="rate"
                          name="FCR Rate"
                          stroke={colors.primary.main}
                          strokeWidth={3}
                          dot={{ fill: colors.primary.main, strokeWidth: 2 }}
                          activeDot={{ r: 8, stroke: colors.primary.light }}
                        />
                      </LineChart>
                    </ResponsiveContainer>
                  </div>
                </div>

                {/* Call Volume Chart */}
                <div className={chartContainerStyle}>
                  <h2 className="text-xl font-semibold text-slate-700 mb-2">Support Call Distribution</h2>
                  <p className="text-sm text-slate-500 mb-6">Weekly breakdown of support calls</p>
                  <div className="h-72">
                    <ResponsiveContainer width="100%" height="100%">
                      <BarChart data={callVolumeData}>
                        <CartesianGrid strokeDasharray="3 3" stroke={colors.border} vertical={false} />
                        <XAxis
                          dataKey="week"
                          stroke={colors.text.secondary}
                          tick={{ fill: colors.text.secondary }}
                          tickLine={false}
                        />
                        <YAxis
                          stroke={colors.text.secondary}
                          tick={{ fill: colors.text.secondary }}
                          tickLine={false}
                          axisLine={false}
                        />
                        <Tooltip contentStyle={tooltipStyle} />
                        <Legend iconType="circle" />
                        <Bar
                          dataKey="total_calls"
                          name="Total Calls"
                          fill={colors.primary.light}
                          radius={[6, 6, 0, 0]}
                        />
                        <Bar
                          dataKey="outage_calls"
                          name="Outage-Related"
                          fill={colors.secondary.light}
                          radius={[6, 6, 0, 0]}
                        />
                      </BarChart>
                    </ResponsiveContainer>
                  </div>
                </div>

                {/* KPI Summary */}
                <div className={chartContainerStyle}>
                  <h2 className="text-xl font-semibold text-slate-700 mb-2">Performance Summary</h2>
                  <p className="text-sm text-slate-500 mb-6">Key metrics overview</p>
                  <div className="space-y-8">
                    <div className="group">
                      <div className="flex justify-between mb-2">
                        <span className="text-sm font-medium text-slate-600">Notification Time Reduction</span>
                        <span className="text-sm font-bold text-blue-600">66.7%</span>
