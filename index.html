<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Dashboard</title>
    <!-- Required Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-gradient"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }
        
        .pulse-animation {
            animation: pulse 1.5s ease-in-out;
        }

        #notificationContainer {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        .data-card {
            transition: all 0.3s ease;
        }
        
        .data-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="notificationContainer"></div>
    
    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold mb-6">Service Dashboard</h1>
        
        <!-- Dashboard Overview Section -->
        <div class="mb-6 grid grid-cols-1 md:grid-cols-4 gap-4">
            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm data-card">
                <div class="flex justify-between items-center">
                    <h3 class="text-gray-500 text-sm">Total Faults</h3>
                    <span class="text-blue-500">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </span>
                </div>
                <div class="mt-2">
                    <h2 class="text-3xl font-bold" id="totalFaults">0</h2>
                    <p class="text-red-600 text-sm flex items-center mt-1">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        </svg>
                        <span id="faultGrowth">0%</span> this month
                    </p>
                </div>
            </div>
            
            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm data-card">
                <div class="flex justify-between items-center">
                    <h3 class="text-gray-500 text-sm">Power Outages</h3>
                    <span class="text-yellow-500">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </span>
                </div>
                <div class="mt-2">
                    <h2 class="text-3xl font-bold" id="powerOutages">0</h2>
                    <p class="text-sm text-gray-500 mt-1">
                        <span id="outagePercentage" class="font-medium">0%</span> of total faults
                    </p>
                </div>
            </div>
            
            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm data-card">
                <div class="flex justify-between items-center">
                    <h3 class="text-gray-500 text-sm">Resolution Rate</h3>
                    <span class="text-green-500">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </span>
                </div>
                <div class="mt-2">
                    <h2 class="text-3xl font-bold" id="resolutionRate">0%</h2>
                    <p class="text-green-600 text-sm flex items-center mt-1">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        </svg>
                        <span id="resolutionGrowth">0%</span> vs last month
                    </p>
                </div>
            </div>
            
            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm data-card">
                <div class="flex justify-between items-center">
                    <h3 class="text-gray-500 text-sm">Avg. Response Time</h3>
                    <span class="text-indigo-500">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </span>
                </div>
                <div class="mt-2">
                    <h2 class="text-3xl font-bold" id="responseTime">0h</h2>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 mt-2">
                        <div class="bg-indigo-600 h-2.5 rounded-full" id="responseTimeBar" style="width: 0%"></div>
                    </div>
                    <p class="text-sm text-gray-500 mt-1">
                        <span id="targetResponseTime">Target: 4h</span>
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Data Visualization Section -->
        <div class="mb-6 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold">Fault Trends</h2>
                    <div class="flex space-x-2">
                        <button class="px-3 py-1 text-sm rounded-md border border-gray-300 hover:bg-gray-50 bg-blue-100 text-blue-700 border-blue-300" onclick="updateChart('weekly')">Weekly</button>
                        <button class="px-3 py-1 text-sm rounded-md border border-gray-300 hover:bg-gray-50" onclick="updateChart('monthly')">Monthly</button>
                        <button class="px-3 py-1 text-sm rounded-md border border-gray-300 hover:bg-gray-50" onclick="updateChart('yearly')">Yearly</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="faultTrendsChart"></canvas>
                </div>
            </div>
            
            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold">Fault Type Distribution</h2>
                    <div class="flex space-x-2">
                        <button class="px-3 py-1 text-sm rounded-md border border-gray-300 hover:bg-gray-50 bg-blue-100 text-blue-700 border-blue-300" onclick="updateFaultTypeChart('all')">All</button>
                        <button class="px-3 py-1 text-sm rounded-md border border-gray-300 hover:bg-gray-50" onclick="updateFaultTypeChart('region')">By Region</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="faultTypeChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Fault Distribution Section -->
        <div class="mb-6 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm col-span-1">
                <h2 class="text-lg font-semibold mb-4">Fault Status</h2>
                <div class="chart-container" style="height: 250px;">
                    <canvas id="faultStatusChart"></canvas>
                </div>
            </div>
            
            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm col-span-2">
                <h2 class="text-lg font-semibold mb-4">Hourly Fault Distribution</h2>
                <div class="chart-container">
                    <canvas id="hourlyFaultChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Fault Management Section -->
        <div class="mb-6">
            <div class="flex justify-between items-center mb-3">
                <h2 class="text-lg font-semibold">Recent Faults</h2>
                <div class="flex space-x-2">
                    <div class="relative">
                        <input id="faultSearch" type="text" placeholder="Search faults..." class="pl-8 pr-3 py-1 border rounded-md" onkeyup="searchFaults()">
                        <svg class="w-4 h-4 text-gray-400 absolute left-2 top-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </div>
                    <button onclick="showAddFaultModal()" class="px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Add Fault
                    </button>
                </div>
            </div>
            
            <div class="overflow-x-auto bg-white rounded-lg border border-gray-200 shadow-sm">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Customer</th>
                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fault Type</th>
                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Timestamp</th>
                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="faultTableBody">
                        <!-- Fault data will appear here -->
                        <tr>
                            <td colspan="6" class="px-3 py-4 text-center text-gray-500">Loading faults...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="mt-3 flex justify-between">
                <button onclick="refreshFaults()" class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm flex items-center">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    Refresh
                </button>
                <div class="text-sm text-gray-500">
                    Showing <span id="faultCount">0</span> faults
                </div>
            </div>
        </div>
        
        <!-- Data Insights Section -->
        <div class="mb-6">
            <h2 class="text-lg font-semibold mb-3">Fault Insights</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="insightsContainer">
                <!-- Insights will be generated here -->
            </div>
            <div class="mt-4 text-center">
                <button onclick="generateInsights()" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm flex items-center mx-auto">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                    Generate New Insights
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal for Add Fault -->
    <div id="addFaultModal" class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg p-6 max-w-md w-full">
            <h3 class="text-lg font-semibold mb-4">Add New Fault</h3>
            <form id="addFaultForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Customer Name</label>
                    <input type="text" id="customerName" class="w-full p-2 border rounded-lg">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" id="customerEmail" class="w-full p-2 border rounded-lg">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                    <input type="text" id="customerAddress" class="w-full p-2 border rounded-lg">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Fault Type</label>
                    <select id="faultType" class="w-full p-2 border rounded-lg">
                        <option value="Power Outage">Power Outage</option>
                        <option value="Internet Disruption">Internet Disruption</option>
                        <option value="Cable Damage">Cable Damage</option>
                    </select>
                </div>
                
                <div class="flex justify-end space-x-2">
                    <button type="button" onclick="hideAddFaultModal()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">Cancel</button>
                    <button type="button" onclick="addFault()" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">Add Fault</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- JavaScript Code -->
    <script>
        // Utility Functions
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            
            // Set notification style based on type
            let bgColor, borderColor, textColor;
            switch (type) {
                case 'success':
                    bgColor = 'bg-green-100';
                    borderColor = 'border-green-400';
                    textColor = 'text-green-800';
                    break;
                case 'error':
                    bgColor = 'bg-red-100';
                    borderColor = 'border-red-400';
                    textColor = 'text-red-800';
                    break;
                default:
                    bgColor = 'bg-blue-100';
                    borderColor = 'border-blue-400';
                    textColor = 'text-blue-800';
            }
            
            notification.className = `${bgColor} ${borderColor} ${textColor} border px-4 py-3 rounded mb-2`;
            notification.innerHTML = message;
            
            container.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transition = 'opacity 0.5s ease';
                setTimeout(() => {
                    container.removeChild(notification);
                }, 500);
            }, 3000);
        }
        
        function showAddFaultModal() {
            document.getElementById('addFaultModal').classList.remove('hidden');
        }
        
        function hideAddFaultModal() {
            document.getElementById('addFaultModal').classList.add('hidden');
            document.getElementById('addFaultForm').reset();
        }
        
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        
        function createGradient(ctx, colorStart, colorEnd) {
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, colorStart);
            gradient.addColorStop(1, colorEnd);
            return gradient;
        }

        // Load the provided fault data
        const initialFaultData = [
            { id: 1, name: "Tan Wei Ling", email: "tan.weiling@example.com", address: "123 Orchard Road, Singapore 238888", faultId: 101, faultType: "Power Outage", timestamp: "01/03/2025 10:00:00", status: "Pending" },
            { id: 2, name: "Lim Kai Sheng", email: "lim.kaisheng@example.com", address: "456 Bukit Timah Road, Singapore 259999", faultId: 102, faultType: "Internet Disruption", timestamp: "01/03/2025 11:00:00", status: "Pending" },
            { id: 3, name: "Ong Mei Hui", email: "ong.meihui@example.com", address: "789 Clementi Avenue 3, Singapore 120789", faultId: 103, faultType: "Cable Damage", timestamp: "01/03/2025 12:00:00", status: "Pending" },
            { id: 4, name: "Chua Jia Hao", email: "chua.jiahao@example.com", address: "101 Tampines Street 11, Singapore 520101", faultId: 104, faultType: "Power Outage", timestamp: "01/03/2025 13:00:00", status: "Pending" },
            { id: 5, name: "Lee Xin Yi", email: "lee.xinyi@example.com", address: "202 Bedok North Road, Singapore 460202", faultId: 105, faultType: "Power Outage", timestamp: "01/03/2025 14:00:00", status: "Pending" },
            { id: 6, name: "Goh Jun Wei", email: "goh.junwei@example.com", address: "303 Yishun Avenue 5, Singapore 760303", faultId: 106, faultType: "Internet Disruption", timestamp: "01/03/2025 15:00:00", status: "Pending" },
            { id: 7, name: "Ng Wei Jie", email: "ng.weijie@example.com", address: "505 Hougang Avenue 8, Singapore 530505", faultId: 107, faultType: "Cable Damage", timestamp: "01/03/2025 16:00:00", status: "Pending" },
            { id: 8, name: "Tan Hui Min", email: "tan.huimin@example.com", address: "404 Ang Mo Kio Avenue 10, Singapore 560404", faultId: 108, faultType: "Cable Damage", timestamp: "01/03/2025 17:00:00", status: "Pending" },
            { id: 9, name: "Lim Shi Ying", email: "lim.shiying@example.com", address: "606 Punggol Walk, Singapore 828606", faultId: 109, faultType: "Internet Disruption", timestamp: "01/03/2025 18:00:00", status: "Pending" },
            { id: 10, name: "Koh Jia En", email: "koh.jiaen@example.com", address: "707 Sengkang East Way, Singapore 540707", faultId: 110, faultType: "Cable Damage", timestamp: "01/03/2025 19:00:00", status: "Pending" }
        ];
        
        // Generate additional fault data
        function generateAdditionalFaultData(count = 15) {
            const names = ["Zhang Wei", "Wang Li", "Liu Xin", "Chen Ming", "Yang Jie", "Zhao Hong", "Wu Fang", "Zhou Yu", "Sun Ling", "Li Yan", "Huang Jun", "Xu Feng", "He Mei", "Zhu Hua", "Gao Ping"];
            const addresses = [
                "808 Jurong West Street 81, Singapore 640808",
                "909 Woodlands Drive 50, Singapore 730909",
                "111 Bishan Street 12, Singapore 570111",
                "222 Serangoon Avenue 4, Singapore 550222",
                "333 Pasir Ris Drive 6, Singapore 510333",
                "444 Choa Chu Kang Avenue 3, Singapore 680444",
                "555 Bukit Batok Street 52, Singapore 650555",
                "666 Toa Payoh Lorong 5, Singapore 310666",
                "777 Geylang East Avenue 1, Singapore 389777",
                "888 Marine Parade Central, Singapore 440888",
                "999 Simei Street 3, Singapore 520999",
                "123 Bukit Merah View, Singapore 150123",
                "456 Kallang Bahru, Singapore 330456",
                "789 Telok Blangah Heights, Singapore 100789",
                "101 Jalan Besar, Singapore 208801"
            ];
            const faultTypes = ["Power Outage", "Internet Disruption", "Cable Damage"];
            const statuses = ["Pending", "In Progress", "Resolved", "Escalated"];
            
            const additionalFaults = [];
            
            for (let i = 0; i < count; i++) {
                const name = names[i % names.length];
                const email = name.toLowerCase().replace(' ', '.') + '@example.com';
                const address = addresses[i % addresses.length];
                const faultType = faultTypes[Math.floor(Math.random() * faultTypes.length)];
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                
                // Generate random date within the last 7 days
                const days = Math.floor(Math.random() * 7);
                const hours = Math.floor(Math.random() * 24);
                const minutes = Math.floor(Math.random() * 60);
                
                const date = new Date(2025, 2, 1 + days);
                date.setHours(hours, minutes, 0);
                
                const timestamp = date.toLocaleString('en-US', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                }).replace(',', '');
                
                additionalFaults.push({
                    id: 11 + i,
                    name: name,
                    email: email,
                    address: address,
                    faultId: 111 + i,
                    faultType: faultType,
                    timestamp: timestamp,
                    status: status
                });
            }
            
            return additionalFaults;
        }
        
        // Chart Variables
        let faultTrendsChart;
        let faultTypeChart;
        let faultStatusChart;
        let hourlyFaultChart;
        
        // Data Variables
        let faultData = [...initialFaultData];
        let timeSeriesData = {
            weekly: [],
            monthly: [],
            yearly: []
        };
        
        // Initialize Dashboard
        function initializeDashboard() {
            // Add additional fault data
            const additionalFaults = generateAdditionalFaultData(15);
            faultData = [...faultData, ...additionalFaults];
            
            // Generate time series data
            generateTimeSeriesData();
            
            // Update dashboard metrics
            updateDashboardMetrics();
            
            // Populate tables
            populateFaultTable();
            
            // Initialize charts
            initializeCharts();
            
            // Generate initial insights
            generateInsights();
            
            // Show success notification
            showNotification('Dashboard data loaded successfully!', 'success');
        }
        
        function generateTimeSeriesData() {
            // Generate weekly data (last 7 days)
            for (let i = 6; i >= 0; i--) {
                const date = new Date(2025, 2, 1 + i);
                
                timeSeriesData.weekly.push({
                    date: date.toISOString().split('T')[0],
                    powerOutage: getRandomInt(3, 8),
                    internetDisruption: getRandomInt(2, 7),
                    cableDamage: getRandomInt(1, 6)
                });
            }
            
            // Generate monthly data (last 30 days)
            for (let i = 29; i >= 0; i--) {
                const date = new Date(2025, 1, 1 + i);
                
                timeSeriesData.monthly.push({
                    date: date.toISOString().split('T')[0],
                    powerOutage: getRandomInt(10, 25),
                    internetDisruption: getRandomInt(8, 20),
                    cableDamage: getRandomInt(5, 15)
                });
            }
            
            // Generate yearly data (last 12 months)
            for (let i = 11; i >= 0; i--) {
                const date = new Date(2024, i, 1);
                
                timeSeriesData.yearly.push({
                    date: date.toISOString().split('T')[0],
                    powerOutage: getRandomInt(50, 100),
                    internetDisruption: getRandomInt(40, 90),
                    cableDamage: getRandomInt(30, 80)
                });
            }
        }
        
        function updateDashboardMetrics() {
            // Calculate total faults
            document.









                
